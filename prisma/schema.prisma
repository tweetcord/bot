datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["mongoDb"]
}

model Guild {
  id      String  @id @map("_id")
  feeds   Feed[]
  premium Boolean @default(false)

  @@map(name: "guilds")
}

model User {
  id              String   @id @map("_id")
  donator         Boolean  @default(false)
  premium         Boolean  @default(false)
  premium_servers String[]

  @@map(name: "users")
}

model Feed {
  id              String      @id @default(dbgenerated()) @map("_id") @db.ObjectId
  message         String      @default("{link}")
  channel         String
  webhook         Webhook     @relation(fields: [webhookId], references: [id])
  user            TwitterUser @relation(fields: [twitterUserId], references: [id])
  Guild           Guild?      @relation(fields: [guildId], references: [id])
  guildId         String?
  webhookId       String
  twitterUserId   String
}

model Webhook {
  token String
  id    String @id @map("_id")
  Feed  Feed[]
}

model TwitterUser {
  screen_name String
  id          String @id @map("_id")
  Feed        Feed[]
}
